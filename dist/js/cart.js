"use strict";var cart_list=[];function bindHtml(){var c="";0===(cart_list=JSON.parse(localStorage.getItem("cart"))).length?$(".main-w").show().siblings().hide():$(".main-w").hide().siblings().show(),cart_list.forEach(function(t){c+='\n      <li>\n        <input class="check_one" type="checkbox" '.concat(t.isSelect?"checked":"",'>\n        <img src="').concat(t.url,'" alt="图片">\n        <span class="message">').concat(t.title,'</span>\n        <span class="unit">').concat(t.price,'</span>\n        <p class="count">\n          <button class="sub">-</button>\n          <span>').concat(t.count,'</span>\n          <button class="add">+</button>\n        </p>\n        <span class="price">\n        ').concat((parseInt(t.price)*t.count).toFixed(2),' 元\n        </span>\n        <p class="font">\n          <i class="glyphicon glyphicon-star"></i>\n          <i class="glyphicon glyphicon-trash del"></i>\n        </p>\n      </li>\n    '),$(".product").html(c)})}function isAll(){var n=!0;$(".check_one").each(function(t,c){!1===$(c).prop("checked")&&(n=!1)}),$(".check_all").prop("checked",n)}function priceSum(){var n=0,e=0,s=0;return $(".check_one").each(function(t,c){e+=parseInt($(this).siblings(".count").children("span").html()),$(this).prop("checked")&&(n+=parseInt($(this).siblings(".price").html()),s+=parseInt($(this).siblings(".count").children("span").html()))}),{goods_count:e,goods_selected:s,price_sum:n}}function account(){var t=priceSum();0!=t.goods_selected?$(".go_buy").addClass("active"):$(".go_buy").removeClass("active"),$(".goods_count").html(t.goods_count),$(".goods_selected").html(t.goods_selected),$(".price_sum").html(t.price_sum),isAll(),localStorage.setItem("cart",JSON.stringify(cart_list))}function bottomFix(){var t=$(".account").offset().top;$(window).scroll(function(){$("html").scrollTop()+$(window).height()<=t?$(".account").addClass("active"):$(".account").removeClass("active")})}bindHtml(),$(".check_all").click(function(){var c=this;$(".check_one").prop("checked",$(this).prop("checked")),cart_list.forEach(function(t){t.isSelect=$(c).prop("checked")}),account()}),$(".check_one").change(function(){var c=this;isAll(),cart_list.forEach(function(t){t.title===$(c).siblings(".message").text()&&(t.isSelect=$(c).prop("checked"))}),account()}),$(".product").on("click",".sub",function(){var c=this,n=$(this).next().text();--n<1&&(n=1),$(this).next().text(n),cart_list.forEach(function(t){t.title===$(c).parent().siblings(".message").text()&&(t.count=n)});var t=(parseInt($(this).parent().prev().text())*n).toFixed(2);$(this).parent().next().text(t+" 元"),account()}),$(".product").on("click",".add",function(){var c=this,n=$(this).prev().text();n++,$(this).prev().text(n),cart_list.forEach(function(t){t.title===$(c).parent().siblings(".message").text()&&(t.count=n)});var t=(parseInt($(this).parent().prev().text())*n).toFixed(2);$(this).parent().next().text(t+" 元"),account()}),$(".product").on("click",".del",function(){var c=this;cart_list=cart_list.filter(function(t){return t.title!=$(c).parent().siblings(".message").text()}),window.location.href="../pages/cart.html",account(),bindHtml()}),priceSum(),account(),bottomFix();